'use strict';angular.module("JarvisApp","ngMaterial ngMdIcons ngSanitize restangular angular-websocket ui.router ui.router.router pascalprecht.translate ngCookies hljs ui.tree JarvisApp.websocket JarvisApp.config JarvisApp.theme JarvisApp.routes JarvisApp.services JarvisApp.services.filter JarvisApp.services.generic JarvisApp.services.scope JarvisApp.services.plugin JarvisApp.services.command JarvisApp.services.scenario JarvisApp.services.snapshot JarvisApp.services.cron JarvisApp.services.view JarvisApp.services.configuration JarvisApp.services.property JarvisApp.services.connector JarvisApp.services.iot JarvisApp.services.event JarvisApp.services.trigger JarvisApp.services.block JarvisApp.directives JarvisApp.directives.widgets JarvisApp.ctrl.plugins JarvisApp.ctrl.commands JarvisApp.ctrl.iots JarvisApp.ctrl.events JarvisApp.ctrl.triggers JarvisApp.ctrl.snapshots JarvisApp.ctrl.crons JarvisApp.ctrl.views JarvisApp.ctrl.configurations JarvisApp.ctrl.properties JarvisApp.ctrl.connectors JarvisApp.ctrl.scenarios JarvisApp.ctrl.blocks JarvisApp.ctrl.home".split(" "));
"use strict";
angular.module("JarvisApp.services.block",[]).factory("blockResourceService",["$log","Restangular","genericResourceService","iotResourceService","filterService",function(a,d,c,e,f){return{block:c.crud(["blocks"]),plugins:{"if":c.links(["blocks"],["plugins","scripts"],"HREF_IF"),then:c.links(["blocks"],["plugins","scripts"],"HREF_THEN"),"else":c.links(["blocks"],["plugins","scripts"],"HREF_ELSE")},blocks:{then:c.links(["blocks"],["blocks"],"HREF_THEN"),"else":c.links(["blocks"],["blocks"],"HREF_ELSE")}}}]);
"use strict";
angular.module("JarvisApp.ctrl.blocks",["JarvisApp.services"]).controller("blocksCtrl",["$scope","$log","genericScopeService","genericPickerService","blockResourceService","toastService",function(a,d,c,e,f,g){c.scope.resources(function(b){a.blocks=b},function(){return a.blocks},a,"blocks",f.block,{name:"block name",icon:"list",parameter:"{}"})}]).controller("blockCtrl",["$scope","$log","$stateParams","genericScopeService","genericResourceService","genericPickerService","blockResourceService","toastService",
function(a,d,c,e,f,g,b,h){e.scope.resource(a,"block","blocks",b.block);a.links={plugins:{"if":{},then:{},"else":{}},blocks:{then:{},"else":{}}};e.scope.resourceLink(function(){return a.plugins.if},a.links.plugins.if,"block","blocks",b.block,b.plugins.if,{order:"1"},c.id);e.scope.resourceLink(function(){return a.plugins.then},a.links.plugins.then,"block","blocks",b.block,b.plugins.then,{order:"1"},c.id);e.scope.resourceLink(function(){return a.plugins.else},a.links.plugins.else,"block","blocks",b.block,
b.plugins.else,{order:"1"},c.id);e.scope.resourceLink(function(){return a.blocks.then},a.links.blocks.then,"block","blocks",b.block,b.blocks.then,{order:"1"},c.id);e.scope.resourceLink(function(){return a.blocks.else},a.links.blocks.else,"block","blocks",b.block,b.blocks.else,{order:"1"},c.id);a.test=function(c){void 0!=c&&void 0!=c.id&&""!=c.id&&b.block.task(c.id,"test",{},function(b){a.testExpression="true"==b},h.failure)};a.execute=function(c){void 0!=c&&void 0!=c.id&&""!=c.id&&b.block.task(c.id,
"execute",{},function(b){d.debug("[BLOCK/test]",c,b);a.testExpression=b},h.failure)};a.load=function(){a.activeTab=c.tab;f.scope.entity.get(c.id,function(b){a.block=b},b.block);a.plugins={if:{},then:{},else:{}};a.plugins.if=[];f.scope.collections.findAll("plugins.if",c.id,a.plugins.if,b.plugins.if);a.plugins.then=[];f.scope.collections.findAll("plugins.then",c.id,a.plugins.then,b.plugins.then);a.plugins.else=[];f.scope.collections.findAll("plugins.else",c.id,a.plugins.else,b.plugins.else);a.blocks=
{then:{},else:{}};a.blocks.then=[];f.scope.collections.findAll("blocks.then",c.id,a.blocks.then,b.blocks.then);a.blocks.else=[];f.scope.collections.findAll("blocks.else",c.id,a.blocks.else,b.blocks.else);d.debug("block-ctrl",a.scenario)}}]);"use strict";angular.module("JarvisApp.services.command",[]).factory("commandResourceService",["genericResourceService",function(a){return{command:a.crud(["commands"])}}]);"use strict";
angular.module("JarvisApp.ctrl.commands",["JarvisApp.services"]).controller("commandsCtrl",["$scope","$log","genericScopeService","commandResourceService",function(a,d,c,e){c.scope.resources(function(c){a.commands=c},function(){return a.commands},a,"commands",e.command,{name:"command name",icon:"list"})}]).controller("commandCtrl",["$scope, $log, $stateParams, genericResourceService, genericScopeService, commandResourceService, toastService",function(a,d,c,e,f,g,b){f.scope.resource(a,"command","commands",
g.command);a.execute=function(c){g.command.task(c.id,"execute",a.rawTestData,function(d){b.info("command "+c.name+"#"+c.id+" executed");a.output=angular.toJson(d,!0)},b.failure)};a.test=function(c){g.command.task(c.id,"test",a.rawTestData,function(d){b.info("command "+c.name+"#"+c.id+" tested");a.output=angular.toJson(d,!0)},b.failure)};a.pretty=function(){d.debug("pretty",a.rawinput);a.jsonTestData=angular.toJson(a.rawTestData,!0)};a.submit=function(){a.rawTestData=angular.fromJson(a.editTestData);
a.jsonTestData=angular.toJson(a.rawTestData,!0)};a.clear=function(){a.rawTestData={"default":"todo"};a.editTestData=angular.toJson(a.rawTestData,!0);a.jsonTestData=angular.toJson(a.rawTestData,!0);a.rawoutput={};a.output=angular.toJson({},!0)};a.load=function(){a.combo={visibles:[{id:!0,value:"common.true"},{id:!1,value:"common.false"}],types:[{id:"SHELL",value:"command.shell"},{id:"COMMAND",value:"command.single"},{id:"GROOVY",value:"command.groovy"},{id:"SSH",value:"command.ssh"}]};a.clear();a.commands=
[];e.scope.entity.get(c.id,function(b){a.command=b},g.command);d.info("command-ctrl")}}]);"use strict";angular.module("JarvisApp.services.configuration",[]).factory("configurationResourceService",["genericResourceService",function(a){return{configuration:a.crud(["configurations"])}}]);"use strict";
angular.module("JarvisApp.ctrl.configurations",["JarvisApp.services"]).controller("configurationsCtrl",["$scope","$log","genericScopeService","configurationResourceService",function(a,d,c,e){c.scope.resources(function(c){a.configurations=c},function(){return a.configurations},a,"configurations",e.configuration,{name:"default",opacity:"1",backgroundUrl:"http://artroyalephotography.com/wp-content/uploads/2011/08/minimal-gray-to-white-gradient-wallpapers_33797_1920x1200-1024x640.jpg"})}]).controller("configurationCtrl",
["$scope","$log","$stateParams","$mdDialog","genericResourceService","genericScopeService","configurationResourceService","toastService",function(a,d,c,e,f,g,b,h){g.scope.resource(a,"configuration","configurations",b.configuration);a.load=function(){f.scope.entity.get(c.id,function(b){a.config=b},b.configuration);d.info("configuration-ctrl",a.configurations)}}]);"use strict";angular.module("JarvisApp.services.connector",[]).factory("connectorResourceService",["genericResourceService",function(a){return{connector:a.crud(["connectors"])}}]);
"use strict";
angular.module("JarvisApp.ctrl.connectors",["JarvisApp.services"]).controller("connectorsCtrl",["$scope","$log","genericScopeService","connectorResourceService",function(a,d,c,e){c.scope.resources(function(c){a.connectors=c},function(){return a.connectors},a,"connectors",e.connector,{name:"connector name",icon:"settings_input_antenna",isRenderer:!1,isSensor:!1,canAnswer:!1})}]).controller("connectorCtrl",["$scope","$log","$stateParams","$mdDialog","genericResourceService","genericScopeService","connectorResourceService",
"toastService",function(a,d,c,e,f,g,b,h){g.scope.resource(a,"connector","connectors",b.connector);a.ping=function(c){b.connector.task(c.id,"ping",c,function(b){a.status=angular.toJson(b,!0)})};a.load=function(){f.scope.entity.get(c.id,function(b){a.connector=b},b.connector);d.info("connector-ctrl",a.connectors)}}]);"use strict";
angular.module("JarvisApp.config",[]).config(["$mdIconProvider",function(a){angular.injector(["ng"]).get("$log").info("$mdIconProvider",a)}]).config(["$translateProvider",function(a){angular.injector(["ng"]).get("$log").info("$translateProvider",a);a.useStaticFilesLoader({prefix:"js/l10n/",suffix:".json"});a.preferredLanguage("fr_FR");a.useSanitizeValueStrategy(null)}]).config(["RestangularProvider",function(a){angular.injector(["ng"]).get("$log").info("RestangularProvider",a);a.setBaseUrl("/api");
a.setDefaultHeaders({"content-type":"application/json"});a.setFullRequestInterceptor(function(a,c,e,f,g,b,h){return{element:a,params:b,headers:g,httpConfig:h}});a.setResponseExtractor(function(a){angular.isObject(a)&&(a.originalElement=a);return a})}]).controller("JarvisAppCtrl",["$scope","$log","$store","$http","$mdDialog","$mdSidenav","$mdMedia","$location","$state","genericPickerService","toastService","iotResourceService","eventResourceService","configurationResourceService",function(a,d,c,e,
f,g,b,h,m,r,k,l,p,n){d.info("JarvisAppCtrl");a.config={};a.media=b("xs");a.$watch(function(){return b("xs")},function(b){b&&(a.media="xs")});a.$watch(function(){return b("gt-xs")},function(b){b&&(a.media="gt-xs")});a.$watch(function(){return b("sm")},function(b){b&&(a.media="sm")});a.$watch(function(){return b("gt-sm")},function(b){b&&(a.media="gt-sm")});a.$watch(function(){return b("md")},function(b){b&&(a.media="md")});a.$watch(function(){return b("gt-md")},function(b){b&&(a.media="gt-md")});a.$watch(function(){return b("lg")},
function(b){b&&(a.media="lg")});a.$watch(function(){return b("gt-lg")},function(b){b&&(a.media="gt-lg")});a.$watch(function(){return b("xl")},function(b){b&&(a.media="xl")});a.$watch(function(){return b("print")},function(b){b&&(a.media="print")});hljs.initHighlightingOnLoad();a.defaultValue=function(a,b){return void 0===a?b:a};a.loadSettings=function(){n.configuration.findAll(function(b){if(b=_.find(b,"active"))a.config=b},k.failure)};a.loadSettings();a.saveSettings=function(){n.configuration.put(a.config,
function(a){d.info("Updated",a)},k.failure)};a.closeSettings=function(){f.hide()};a.settings=function(c){var e=b("sm")||b("xs");f.show({scope:a,preserveScope:!0,templateUrl:"js/partials/dialog/settingsDialog.tmpl.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0,fullscreen:e}).then(function(){d.warn("Saving settings")},function(){d.warn("Cancel settings save")})};a.markdown=new showdown.Converter({tables:"true",ghCodeBlocks:"true"});a.helper=function(b){d.debug("State",
m.current.name);e.get("js/helps/fr/"+m.current.name+".markdown").then(function(b){b=a.markdown.makeHtml(b.data);a.help={content:b.replace(/<table>/g,'\x3ctable class\x3d"table table-striped table-bordered table-hover"\x3e')};d.debug("Help",a.help);g("right").toggle()})};a.toggleSidenav=function(a){g(a).toggle()};a.location=function(a,b){g(a).toggle();h.path(b)};a.go=function(a,b){m.go(a,b)};a.emit=function(a,b){d.debug("JarvisAppCtrl::emit",a,b,a.trigger);p.event.post({trigger:a.trigger,timestamp:(new Date).toISOString(),
fired:!0,number:b},function(a){d.debug("JarvisAppCtrl::emit",a);k.info("event "+a.trigger+"#"+a.id+" emitted")},k.failure)};a.execute=function(b){l.iot.task(b.id,"execute",{},function(b){d.debug("JarvisAppCtrl::execute",b);a.renderdata=b},k.failure)};a.graph=function(a,b){return r.pickers.graph(a,b,function(a){d.debug("Go")},function(){d.debug("Abort")},"graphDialogCtrl")};d.info("JarvisAppCtrl configured")}]).controller("graphDialogCtrl",["$scope","$log","$mdDialog",function(a,d,c){d.info("graphDialogCtrl");
a.hide=function(){c.hide()};a.cancel=function(){c.cancel()};a.answer=function(a){c.hide(a)}}]).controller("pickPluginDialogCtrl",["$scope","$log","$mdDialog","genericResourceService","toastService",function(a,d,c,e,f){d.info("pickPluginDialogCtrl");a.hide=function(){c.hide()};a.cancel=function(){c.cancel()};a.answer=function(a){c.hide(a)};a.elementsPicker=[{name:"Connected Objects",selectable:!1,nodes:[]},{name:"Plugin Scripts",selectable:!1,nodes:[]}];a.crudIot=e.crud(["iots"]);a.crudIot.findAll(function(c){_.each(c,
function(b){b.selectable=!1;a.elementsPicker[0].nodes.push(b)})},f.failure);a.crudScript=e.crud(["plugins","scripts"]);a.crudScript.findAll(function(c){_.each(c,function(b){b.selectable=!0;a.elementsPicker[1].nodes.push(b)})},f.failure)}]).controller("pickIotDialogCtrl",["$scope","$log","$mdDialog","genericResourceService","toastService",function(a,d,c,e,f){d.info("pickIotDialogCtrl");a.hide=function(){c.hide()};a.cancel=function(){c.cancel()};a.answer=function(a){c.hide(a)};a.elementsPicker=[{name:"Connected Objects",
selectable:!1,nodes:[]},{name:"Plugin Scripts",selectable:!1,nodes:[]}];a.crudIot=e.crud(["iots"]);a.crudIot.findAll(function(c){_.each(c,function(b){b.selectable=!0;a.elementsPicker[0].nodes.push(b)})},f.failure);a.crudScript=e.crud(["plugins","scripts"]);a.crudScript.findAll(function(c){_.each(c,function(b){b.selectable=!1;a.elementsPicker[1].nodes.push(b)})},f.failure)}]).controller("pickCommandDialogCtrl",["$scope","$log","$mdDialog","genericResourceService","toastService",function(a,d,c,e,f){d.info("pickCommandDialogCtrl");
a.hide=function(){c.hide()};a.cancel=function(){c.cancel()};a.answer=function(a){c.hide(a)};a.elementsPicker=[{name:"Commands",selectable:!1,nodes:[]}];a.crud=e.crud(["commands"]);a.crud.findAll(function(c){_.each(c,function(b){b.selectable=!0;a.elementsPicker[0].nodes.push(b)})},f.failure)}]).controller("pickTriggerDialogCtrl",["$scope","$log","$mdDialog","genericResourceService","toastService",function(a,d,c,e,f){d.info("pickTriggerDialogCtrl");a.hide=function(){c.hide()};a.cancel=function(){c.cancel()};
a.answer=function(a){c.hide(a)};a.elementsPicker=[{name:"Triggers",selectable:!1,nodes:[]}];a.crud=e.crud(["triggers"]);a.crud.findAll(function(c){_.each(c,function(b){b.selectable=!0;a.elementsPicker[0].nodes.push(b)})},f.failure)}]).controller("pickBlockDialogCtrl",["$scope","$log","$mdDialog","genericResourceService","toastService",function(a,d,c,e,f){d.info("pickBlockDialogCtrl");a.hide=function(){c.hide()};a.cancel=function(){c.cancel()};a.answer=function(a){c.hide(a)};a.elementsPicker=[{name:"Blocks",
selectable:!1,nodes:[]}];a.crudBlock=e.crud(["blocks"]);a.crudBlock.findAll(function(c){_.each(c,function(b){b.selectable=!0;a.elementsPicker[0].nodes.push(b)})},f.failure)}]);"use strict";angular.module("JarvisApp.services.cron",[]).factory("cronResourceService",["genericResourceService",function(a){return{cron:a.crud(["crons"])}}]);"use strict";
angular.module("JarvisApp.ctrl.crons",["JarvisApp.services"]).controller("cronsCtrl",["$scope","$log","genericScopeService","cronResourceService",function(a,d,c,e){c.scope.resources(function(c){a.crons=c},function(){return a.crons},a,"crons",e.cron,{name:"cron name",icon:"list",cron:"* * * * *"})}]).controller("cronCtrl",["$scope","$log","$stateParams","$filter","$http","genericResourceService","genericScopeService","cronResourceService","iotResourceService","toastService",function(a,d,c,e,f,g,b,
h,m,r){b.scope.resource(a,"cron","crons",h.cron);a.load=function(){a.crons=[];g.scope.entity.get(c.id,function(b){a.cron=b},h.cron);d.info("cron-ctrl",a.crons)}}]);"use strict";
angular.module("JarvisApp.directives",[]).directive("appVersion",function(a){return function(d,c,e){c.text(a)}}).directive("fileModel",function(a,d){return{restrict:"A",link:function(c,d,f){var g=a(f.fileModel).assign;d.bind("change",function(){c.$apply(function(){g(c,d[0].files[0])})})}}}).directive("fileSelect",function(a,d){return{restrict:"A",require:"ngModel",link:function(c,e,f,g){var b=new a.FileReader;b.onload=function(){var a=b.result.substr(b.result.lastIndexOf(",")+1);d.debug("result:",
b.result);d.debug("result base64 value:",a);g.$setViewValue(atob(a));"fileLoaded"in f&&c.$eval(f.fileLoaded)};b.onprogress=function(a){"fileProgress"in f&&c.$eval(f.fileProgress,{$total:a.total,$loaded:a.loaded})};b.onerror=function(){"fileError"in f&&c.$eval(f.fileError,{$error:b.error})};var h=f.fileSelect;e.bind("change",function(a){a=a.target.files[0];""===h||"text"===h?b.readAsText(a,"UTF-8"):"data"===h&&b.readAsDataURL(a)})}}});"use strict";
angular.module("JarvisApp.services.event",[]).factory("eventResourceService",["genericResourceService",function(a){return{event:a.crud(["events"])}}]);"use strict";angular.module("JarvisApp.ctrl.events",["JarvisApp.services"]).controller("eventsCtrl",["$scope","$log","genericScopeService","genericResourceService","eventResourceService",function(a,d,c,e,f){c.scope.resources(function(c){a.events=c},function(){return a.events},a,"events",f.event);a.crud=e.crud(["events"])}]);"use strict";
var myAppServices=angular.module("JarvisApp.services.filter",[]);myAppServices.factory("filterService",["Restangular",function(a){return{plain:function(d){if(angular.isArray(d)||angular.isObject(d))d=a.stripRestangular(d),delete d.originalElement;return d}}}]);"use strict";angular.module("JarvisApp.filters",[]).filter("interpolate",["version",function(a){return function(d){return String(d).replace(/\%VERSION\%/mg,a)}}]);
(function(){var a,d,c,e,f,g,b,h,m,r,k,l,p,n={}.hasOwnProperty,q=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(){var a,b,c,d,e,h,f;f=["ms","moz","webkit","o"];c=0;for(e=f.length;e>c&&(h=f[c],!window.requestAnimationFrame);c++)window.requestAnimationFrame=window[h+"RequestAnimationFrame"],window.cancelAnimationFrame=window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"];
return a=null,d=0,b={},requestAnimationFrame?window.cancelAnimationFrame?void 0:(a=window.requestAnimationFrame,window.requestAnimationFrame=function(c,e){var h;return h=++d,a(function(){return b[h]?void 0:c()},e),h},window.cancelAnimationFrame=function(a){return b[a]=!0}):(window.requestAnimationFrame=function(a,b){var c,d,e,h;return c=(new Date).getTime(),h=Math.max(0,16-(c-e)),d=window.setTimeout(function(){return a(c+h)},h),e=c+h,d},window.cancelAnimationFrame=function(a){return clearTimeout(a)})}();
String.prototype.hashCode=function(){var a,b,c,d;if(b=0,0===this.length)return b;a=c=0;for(d=this.length;0<=d?d>c:c>d;a=0<=d?++c:--c)a=this.charCodeAt(a),b=(b<<5)-b+a,b&=b;return b};l=function(a){var b,c;b=Math.floor(a/3600);c=Math.floor((a-3600*b)/60);a=a-(3600*b+60*c)+"";for(c+="";2>c.length;)c="0"+c;for(;2>a.length;)a="0"+a;return b=b?b+":":"",b+c+":"+a};r=function(a){return h(a.toFixed(0))};p=function(a,b){var c,d;for(c in b)n.call(b,c)&&(d=b[c],a[c]=d);return a};k=function(a,b){var c,d,e;d={};
for(c in a)n.call(a,c)&&(e=a[c],d[c]=e);for(c in b)n.call(b,c)&&(e=b[c],d[c]=e);return d};h=function(a){var b,c;b=(a+"").split(".");a=b[0];c="";1<b.length&&(c="."+b[1]);for(b=/(\d+)(\d{3})/;b.test(a);)a=a.replace(b,"$1,$2");return a+c};m=function(a){return"#"===a.charAt(0)?a.substring(1,7):a};b=function(){function a(b,c){null==b&&(b=!0);this.clear=null!=c?c:!0;b&&AnimationUpdater.add(this)}return a.prototype.animationSpeed=32,a.prototype.update=function(a){var b;return null==a&&(a=!1),a||this.displayedValue!==
this.value?(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),b=this.value-this.displayedValue,.001>=Math.abs(b/this.animationSpeed)?this.displayedValue=this.value:this.displayedValue+=b/this.animationSpeed,this.render(),!0):!1},a}();d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return q(b,a),b.prototype.displayScale=1,b.prototype.setTextField=function(a){return this.textField=a instanceof g?a:new g(a)},b.prototype.setMinValue=function(a,
b){var c,d,e,h,f;if(this.minValue=a,null==b&&(b=!0),b){this.displayedValue=this.minValue;h=this.gp||[];f=[];d=0;for(e=h.length;e>d;d++)c=h[d],f.push(c.displayedValue=this.minValue);return f}},b.prototype.setOptions=function(a){return null==a&&(a=null),this.options=k(this.options,a),this.textField&&(this.textField.el.style.fontSize=a.fontSize+"px"),.5<this.options.angle&&(this.gauge.options.angle=.5),this.configDisplayScale(),this},b.prototype.configDisplayScale=function(){var a,b,c,d,e;return d=this.displayScale,
!1===this.options.highDpiSupport?delete this.displayScale:(b=window.devicePixelRatio||1,a=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.displayScale=b/a),this.displayScale!==d&&(e=this.canvas.G__width||this.canvas.width,c=this.canvas.G__height||this.canvas.height,this.canvas.width=e*this.displayScale,this.canvas.height=c*this.displayScale,this.canvas.style.width=
e+"px",this.canvas.style.height=c+"px",this.canvas.G__width=e,this.canvas.G__height=c),this},b}(b);g=function(){function a(b){this.el=b}return a.prototype.render=function(a){return this.el.innerHTML=r(a.displayedValue)},a}();(function(a){function b(a,c){this.elem=a;this.text=null!=c?c:!1;this.value=1*this.elem.innerHTML;this.text&&(this.value=0)}return q(b,a),b.prototype.displayedValue=0,b.prototype.value=0,b.prototype.setVal=function(a){return this.value=1*a},b.prototype.render=function(){var a;
return a=this.text?l(this.displayedValue.toFixed(0)):h(r(this.displayedValue)),this.elem.innerHTML=a},b})(b);f=function(a){function b(a){this.gauge=a;this.ctx=this.gauge.ctx;this.canvas=this.gauge.canvas;b.__super__.constructor.call(this,!1,!1);this.setOptions()}return q(b,a),b.prototype.displayedValue=0,b.prototype.value=0,b.prototype.options={strokeWidth:.035,length:.1,color:"#000000"},b.prototype.setOptions=function(a){return null==a&&(a=null),p(this.options,a),this.length=this.canvas.height*this.options.length,
this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.displayedValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle},b.prototype.render=function(){var a,b,c,d,e,h,f,l,m;return a=this.gauge.getAngle.call(this,this.displayedValue),b=this.canvas.width/2,c=.9*this.canvas.height,l=Math.round(b+this.length*Math.cos(a)),m=Math.round(c+this.length*Math.sin(a)),h=Math.round(b+
this.strokeWidth*Math.cos(a-Math.PI/2)),f=Math.round(c+this.strokeWidth*Math.sin(a-Math.PI/2)),d=Math.round(b+this.strokeWidth*Math.cos(a+Math.PI/2)),e=Math.round(c+this.strokeWidth*Math.sin(a+Math.PI/2)),this.ctx.fillStyle=this.options.color,this.ctx.beginPath(),this.ctx.arc(b,c,this.strokeWidth,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(h,f),this.ctx.lineTo(l,m),this.ctx.lineTo(d,e),this.ctx.fill()},b}(b);(function(){function a(b){this.elem=b}return a.prototype.updateValues=
function(a){return this.value=a[0],this.maxValue=a[1],this.avgValue=a[2],this.render()},a.prototype.render=function(){var a,b;return this.textField&&this.textField.text(r(this.value)),0===this.maxValue&&(this.maxValue=2*this.avgValue),b=this.value/this.maxValue*100,a=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:b+"%"}),$(".typical-value",this.elem).css({width:a+"%"})},a})();e=function(a){function b(a){this.canvas=a;b.__super__.constructor.call(this);this.percentColors=null;
"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas));this.ctx=this.canvas.getContext("2d");this.gp=[new f(this)];this.setOptions();this.render()}return q(b,a),b.prototype.elem=null,b.prototype.value=[20],b.prototype.maxValue=80,b.prototype.minValue=0,b.prototype.displayedAngle=0,b.prototype.displayedValue=0,b.prototype.lineWidth=40,b.prototype.paddingBottom=.1,b.prototype.percentColors=null,b.prototype.options={colorStart:"#6fadcf",colorStop:void 0,
gradientType:0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40,limitMax:!1},b.prototype.setOptions=function(a){var c,d,e;null==a&&(a=null);b.__super__.setOptions.call(this,a);this.configPercentColors();this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth;this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.render();e=this.gp;c=0;for(d=e.length;d>
c;c++)a=e[c],a.setOptions(this.options.pointer),a.render();return this},b.prototype.configPercentColors=function(){var a,b,c,d,e,h,f;if(this.percentColors=null,void 0!==this.options.percentColors){this.percentColors=[];h=[];c=d=0;for(e=this.options.percentColors.length-1;0<=e?e>=d:d>=e;c=0<=e?++d:--d)f=parseInt(m(this.options.percentColors[c][1]).substring(0,2),16),b=parseInt(m(this.options.percentColors[c][1]).substring(2,4),16),a=parseInt(m(this.options.percentColors[c][1]).substring(4,6),16),h.push(this.percentColors[c]=
{pct:this.options.percentColors[c][0],color:{r:f,g:b,b:a}});return h}},b.prototype.set=function(a){var b,c,d,e,h;if(this.displayedValue=this.minValue,a instanceof Array||(a=[a]),a.length>this.gp.length)for(b=0,c=a.length-this.gp.length;0<=c?c>b:b>c;0<=c?++b:--b)this.gp.push(new f(this));b=0;e=!1;c=0;for(d=a.length;d>c;c++)h=a[c],h>this.maxValue&&(this.maxValue=1.1*this.value,e=!0),this.gp[b].value=h,this.gp[b++].setOptions({maxValue:this.maxValue,angle:this.options.angle});return this.value=a[a.length-
1],e&&this.options.limitMax?void 0:AnimationUpdater.run()},b.prototype.getAngle=function(a){return(1+this.options.angle)*Math.PI+(a-this.minValue)/(this.maxValue-this.minValue)*(1-2*this.options.angle)*Math.PI},b.prototype.getColorForPercentage=function(a,b){var c,d,e,h,f,l,m;if(0===a)c=this.percentColors[0].color;else for(c=this.percentColors[this.percentColors.length-1].color,e=h=0,l=this.percentColors.length-1;0<=l?l>=h:h>=l;e=0<=l?++h:--h)if(a<=this.percentColors[e].pct){!0===b?(m=this.percentColors[e-
1],d=this.percentColors[e],f=(a-m.pct)/(d.pct-m.pct),c={r:Math.floor(m.color.r*(1-f)+d.color.r*f),g:Math.floor(m.color.g*(1-f)+d.color.g*f),b:Math.floor(m.color.b*(1-f)+d.color.b*f)}):c=this.percentColors[e].color;break}return"rgb("+[c.r,c.g,c.b].join()+")"},b.prototype.getColorForValue=function(a,b){var c;return c=(a-this.minValue)/(this.maxValue-this.minValue),this.getColorForPercentage(c,b)},b.prototype.render=function(){var a,b,c,d,e;d=this.canvas.width/2;c=this.canvas.height*(1-this.paddingBottom);
a=this.getAngle(this.displayedValue);this.textField&&this.textField.render(this);this.ctx.lineCap="butt";void 0!==this.options.customFillStyle?b=this.options.customFillStyle(this):null!==this.percentColors?b=this.getColorForValue(this.displayedValue,!0):void 0!==this.options.colorStop?(b=0===this.options.gradientType?this.ctx.createRadialGradient(d,c,9,d,c,70):this.ctx.createLinearGradient(0,0,d,0),b.addColorStop(0,this.options.colorStart),b.addColorStop(1,this.options.colorStop)):b=this.options.colorStart;
this.ctx.strokeStyle=b;this.ctx.beginPath();this.ctx.arc(d,c,this.radius,(1+this.options.angle)*Math.PI,a,!1);this.ctx.lineWidth=this.lineWidth;this.ctx.stroke();this.ctx.strokeStyle=this.options.strokeColor;this.ctx.beginPath();this.ctx.arc(d,c,this.radius,a,(2-this.options.angle)*Math.PI,!1);this.ctx.stroke();d=this.gp;e=[];b=0;for(c=d.length;c>b;b++)a=d[b],e.push(a.update(!0));return e},b}(d);a=function(a){function b(a){this.canvas=a;b.__super__.constructor.call(this);"undefined"!=typeof G_vmlCanvasManager&&
(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas));this.ctx=this.canvas.getContext("2d");this.setOptions();this.render()}return q(b,a),b.prototype.lineWidth=15,b.prototype.displayedValue=0,b.prototype.value=33,b.prototype.maxValue=80,b.prototype.minValue=0,b.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35},b.prototype.getAngle=function(a){return(1-this.options.angle)*Math.PI+(a-this.minValue)/(this.maxValue-
this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},b.prototype.setOptions=function(a){return null==a&&(a=null),b.__super__.setOptions.call(this,a),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.canvas.height/2-this.lineWidth/2,this},b.prototype.set=function(a){return this.value=a,this.value>this.maxValue&&(this.maxValue=1.1*this.value),AnimationUpdater.run()},b.prototype.render=function(){var a,b,c,d;return a=this.getAngle(this.displayedValue),d=this.canvas.width/
2,c=this.canvas.height/2,this.textField&&this.textField.render(this),b=this.ctx.createRadialGradient(d,c,39,d,c,70),b.addColorStop(0,this.options.colorStart),b.addColorStop(1,this.options.colorStop),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(d,c,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=b,this.ctx.beginPath(),this.ctx.arc(d,c,this.radius,
(1-this.options.angle)*Math.PI,a,!1),this.ctx.stroke()},b}(d);c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return q(b,a),b.prototype.strokeGradient=function(a,b,c,d){var e;return e=this.ctx.createRadialGradient(a,b,c,a,b,d),e.addColorStop(0,this.options.shadowColor),e.addColorStop(.12,this.options._orgStrokeColor),e.addColorStop(.88,this.options._orgStrokeColor),e.addColorStop(1,this.options.shadowColor),e},b.prototype.setOptions=function(a){var c,d,e,h;return null==
a&&(a=null),b.__super__.setOptions.call(this,a),h=this.canvas.width/2,c=this.canvas.height/2,d=this.radius-this.lineWidth/2,e=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(h,c,d,e),this},b}(a);window.AnimationUpdater={elements:[],animId:null,addAll:function(a){var b,c,d,e;e=[];c=0;for(d=a.length;d>c;c++)b=a[c],e.push(AnimationUpdater.elements.push(b));return e},add:function(a){return AnimationUpdater.elements.push(a)},
run:function(){var a,b,c,d,e;a=!0;e=AnimationUpdater.elements;c=0;for(d=e.length;d>c;c++)b=e[c],b.update()&&(a=!1);return a?cancelAnimationFrame(AnimationUpdater.animId):AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}};"function"==typeof window.define&&null!=window.define.amd?define(function(){return{Gauge:e,Donut:c,BaseDonut:a,TextRenderer:g}}):"undefined"!=typeof module&&null!=module.exports?module.exports={Gauge:e,Donut:c,BaseDonut:a,TextRenderer:g}:(window.Gauge=e,window.Donut=
c,window.BaseDonut=a,window.TextRenderer=g)}).call(this);"use strict";
angular.module("JarvisApp.services.generic",["JarvisApp.services.filter"]).factory("genericResourceService",["$log","Restangular","filterService","toastService",function(a,d,c,e){a.info("genericResourceService");var f={findAll:function(b,e,f){var g=function(d){var f=[];_.forEach(d,function(a){f.push(c.plain(a))});a.debug("[FIND]",b,f);e(f)};1==b.length?d.all(b[0]).getList().then(g,function(a){f(a)}):d.all(b[0]).all(b[1]).getList().then(g,function(a){f(a)})},get:function(b,e,f,g){var k=function(d){d=
c.plain(d);a.debug("[GET]",b,d);void 0!=f&&f(d)};1==b.length?d.one(b[0],e).get().then(k,function(a){g(a)}):d.all(b[0]).one(b[1],e).get().then(k,function(a){g(a)})},delete:function(b,e,f,g){var k=function(d){d=c.plain(d);a.debug("[DELETE]",b,d);void 0!=f&&f(d)};1==b.length?d.one(b[0],e).remove().then(k,function(a){g(a)}):d.all(b[0]).one(b[1],e).remove().then(k,function(a){g(a)})},put:function(b,e,f,g){var k=function(d){d=c.plain(d);a.debug("[PUT]",b,d);void 0!=f&&f(d)};1==b.length?d.one(b[0],e.id).customPUT(e).then(k,
function(a){g(a)}):d.all(b[0]).one(b[1],e.id).customPUT(e).then(k,function(a){g(a)})},post:function(b,e,f,g){var k=function(d){d=c.plain(d);a.debug("[POST]",b,d);void 0!=f&&f(d)};1==b.length?d.all(b[0]).post(e).then(k,function(a){g(a)}):d.all(b[0]).all(b[1]).post(e).then(k,function(a){g(a)})},task:function(b,e,f,g,k,l){var p=function(d){var e=c.plain(d);a.debug("[TASK]",d,b,e);void 0!=k&&k(e)};1==b.length?d.all(b[0]).one(e).customPOST(g,"",{task:f}).then(p,function(a){l(a)}):d.all(b[0]).all(b[1]).one(e).customPOST(g,
"",{task:f}).then(p,function(a){l(a)})}},g={findAll:function(b,e,f,g,k,l){var p=function(d){var l=[];_.forEach(d,function(a){l.push(c.plain(a))});a.debug("[FIND/L/"+f+"]",b,e,g,l);k(l)};1==e.length?1==b.length?d.one(b[0],g).all(e[0]).getList({href:f}).then(p,function(a){l(a)}):d.all(b[0]).one(b[1],g).all(e[0]).getList({href:f}).then(p,function(a){l(a)}):1==b.length?d.one(b[0],g).all(e[0]).all(e[1]).getList({href:f}).then(p,function(a){l(a)}):d.all(b[0]).one(b[1],g).all(e[0]).all(e[1]).getList({href:f}).then(p,
function(a){l(a)})},post:function(b,e,f,g,k,l,p,n){var q=function(d){d=c.plain(d);a.debug("[POST/L]",b,d);void 0!=p&&p(d)};void 0!=l&&(l.href=f);1==e.length?1==b.length?d.one(b[0],g).one(e[0],k).customPOST(l).then(q,function(a){n(a)}):d.all(b[0]).one(b[1],g).one(e[0],k).customPOST(l).then(q,function(a){n(a)}):1==b.length?d.one(b[0],g).all(e[0]).one(e[1],k).customPOST(l).then(q,function(a){n(a)}):d.all(b[0]).one(b[1],g).all(e[0]).one(e[1],k).customPOST(l).then(q,function(a){n(a)})},put:function(b,
e,f,g,k,l,p,n,q){var t=function(d){d=c.plain(d);a.debug("[PUT/L]",b,d);void 0!=n&&n(d)},s={},s=void 0===p?{}:p;s.href=f;1==e.length?1==b.length?d.one(b[0],g).one(e[0],k).one(l).customPUT(s).then(t,function(a){q(a)}):d.all(b[0]).one(b[1],g).one(e[0],k).one(l).customPUT(s).then(t,function(a){q(a)}):1==b.length?d.one(b[0],g).all(e[0]).one(e[1],k).one(l).customPUT(s).then(t,function(a){q(a)}):d.all(b[0]).one(b[1],g).all(e[0]).one(e[1],k).one(l).customPUT(s).then(t,function(a){q(a)})},delete:function(b,
e,f,g,k,l,p,n){var q=function(d){d=c.plain(d);a.debug("[DELETE/L]",b,d);void 0!=p&&p(d)};1==e.length?1==b.length?d.one(b[0],g).one(e[0],k).remove({instance:l,href:f}).then(q,function(a){n(a)}):d.all(b[0]).one(b[1],g).one(e[0],k).remove({instance:l,href:f}).then(q,function(a){n(a)}):1==b.length?d.one(b[0],g).all(e[0]).one(e[1],k).remove({instance:l,href:f}).then(q,function(a){n(a)}):d.all(b[0]).one(b[1],g).all(e[0]).one(e[1],k).remove({instance:l,href:f}).then(q,function(a){n(a)})}};return{crud:function(a){return{findAll:function(c,
d){return f.findAll(a,c,d)},get:function(c,d,e){return f.get(a,c,d,e)},delete:function(c,d,e){return f.delete(a,c,d,e)},put:function(c,d,e){return f.put(a,c,d,e)},post:function(c,d,e){return f.post(a,c,d,e)},task:function(c,d,e,g,l){return f.task(a,c,d,e,g,l)}}},links:function(a,c,d){void 0===d&&(d="HREF");return{findAll:function(e,f,l){return g.findAll(a,c,d,e,f,l)},delete:function(e,f,l,p,n){return g.delete(a,c,d,e,f,l,p,n)},put:function(e,f,l,p,n,q){return g.put(a,c,d,e,f,l,p,n,q)},post:function(e,
f,l,p,n){return g.post(a,c,d,e,f,l,p,n)}}},scope:{collections:{new:function(b,c,d,f,g){f.post(d,function(d){a.debug(b+" "+d.name+"#"+d.id+" created");c.push(d);g&&g(d)},e.failure)},findAll:function(b,c,d,f,g){a.debug("loading ",b,f);d.splice(0,d.length);f.findAll(c,function(c){_.forEach(c,function(a){d.push(a)});a.debug("loaded ",b,d);g&&g(d)},e.failure)}},entity:{get:function(b,c,d){d.get(b,function(b){c(b);a.debug("[GET/scope] "+b.name+"#"+b.id)},e.failure)},remove:function(a,c,d,f){f.delete(d.id,
function(f){e.info(c+" "+d.name+"#"+d.id+" removed");a()},e.failure)},save:function(a,c,d){d.put(c,function(d){e.info(a+" "+c.name+"#"+c.id+" updated")},e.failure)},duplicate:function(a,c,d,f){f.post(d,function(f){e.info(c+" "+d.name+"#"+d.id+" duplicated");a()},e.failure)}},link:{add:function(b,c,d,f,g){void 0!=c&&void 0!=c.id&&""!=c.id&&f.post(b,c.id,d,function(b){a.debug("addLink",b);g.push(b)},e.failure)},save:function(b,c,d){void 0!=c&&void 0!=c.id&&""!=c.id&&d.put(b,c.id,c.instance,c.extended,
function(b){a.debug("updateLink - before",c);a.debug("updateLink - after",b)},e.failure)},remove:function(b,c,d,f){void 0!=c&&void 0!=c.id&&""!=c.id&&d.delete(b,c.id,c.instance,function(b){var d=c.instance;_.remove(f,function(a){return a.instance==d});a.debug("removeLink - before",c)},e.failure)}},combo:{findAll:function(b,c,d){a.debug("loading for select ",b,c);d.findAll(function(a){_.forEach(a,function(a){c.push({id:a.id,name:a.name})})},e.failure)}}}}}]).factory("genericPickerService",["$log",
"$mdDialog","toastService",function(a,d,c){return{pickers:{confirm:function(a,c,g,b){a=d.confirm().title(a).textContent(c).ariaLabel("Confirm").ok(g).cancel(b);return d.show(a)},nodes:function(a,c,g,b){d.show({controller:b,templateUrl:"js/partials/dialog/nodesDialog.tmpl.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0}).then(function(a){c(a)},function(){g()})},graph:function(a,c,g,b,h){d.show({locals:{anchor:c},bindToController:!0,controller:h,templateUrl:"js/partials/dialog/graphDialog.tmpl.html",
targetEvent:a,clickOutsideToClose:!0}).then(function(a){g(a)},function(){b()})}}}}]);"use strict";
angular.module("JarvisApp.ctrl.home",["JarvisApp.services"]).controller("homeCtrl",["$scope","$store","$log","viewResourceService","iotResourceService","toastService",function(a,d,c,e,f,g){a.onSwipeLeft=function(){a.tabIndex>=a.views.length-1?a.tabIndex=a.views.length-1:a.tabIndex++};a.onSwipeRight=function(){0>=a.tabIndex?a.tabIndex=0:a.tabIndex--};a.selectTab=function(b,c){a.tabIndex=c};a.activeTab=function(b,c){return a.tabIndex==c};a.load=function(){a.store=d;a.views=[];a.tabIndex=-1;e.view.findAll(function(b){var d=
[];_.forEach(b,function(a){a.ishome&&(a.urlBackground="url('"+a.url+"')",d.push(a))});g.info(d.length+" view(s)");_.forEach(d,function(a){c.info("loading view",a);e.iots.findAll(a.id,function(b){a.iots=b;var d=_.after(a.iots.length,function(){c.debug("Linked iots to view",a.iots)});_.forEach(a.iots,function(a){f.iot.task(a.id,"render",{},function(b){a.render=b;d(a)},g.failure)})},g.failure)});a.views=d;0<a.views.length&&(a.tabIndex=0)},g.failure);c.info("views-ctrl")}}]).controller("helperCtrl",["$scope",
"$store","$log","viewResourceService","iotResourceService","toastService",function(a,d,c,e,f,g){}]);"use strict";angular.module("JarvisApp.services.iot",[]).factory("iotResourceService",["genericResourceService",function(a){return{iot:a.crud(["iots"]),plugins:a.links(["iots"],["plugins","scripts"]),iots:a.links(["iots"],["iots"]),triggers:a.links(["iots"],["triggers"])}}]);"use strict";
angular.module("JarvisApp.ctrl.iots",["JarvisApp.services"]).controller("iotsCtrl",["$scope","$log","genericScopeService","iotResourceService",function(a,d,c,e){c.scope.resources(function(c){a.iots=c},function(){return a.iots},a,"iots",e.iot,{name:"object name",icon:"list"})}]).controller("iotCtrl",["$scope","$log","$state","$stateParams","iotResourceService","pluginResourceService","genericScopeService","genericResourceService","toastService",function(a,d,c,e,f,g,b,h,m){a.getLink=function(){return a.plugins};
b.scope.resource(a,"iot","iots",f.iot);a.links={plugins:{},triggers:{},iots:{}};b.scope.resourceLink(function(){return a.plugins},a.links.plugins,"iot","iots",f.iot,f.plugins,{order:"1"},e.id);b.scope.resourceLink(function(){return a.triggers},a.links.triggers,"iot","iots",f.iot,f.triggers,{order:"1"},e.id);b.scope.resourceLink(function(){return a.iots},a.links.iots,"iot","iots",f.iot,f.iots,{order:"1"},e.id);a.render=function(b){f.iot.task(b.id,"render",{},function(b){d.debug("iotCtrl::render",b);
a.renderdata=b;a.output=angular.toJson(b,!0)},m.failure)};a.load=function(){a.activeTab=e.tab;h.scope.entity.get(e.id,function(b){a.iot=b},f.iot);a.plugins=[];h.scope.collections.findAll("plugins",e.id,a.plugins,f.plugins);a.iots=[];h.scope.collections.findAll("iots",e.id,a.iots,f.iots);a.triggers=[];h.scope.collections.findAll("triggers",e.id,a.triggers,f.triggers);d.info("iot-ctrl")}}]);"use strict";
angular.module("JarvisApp.services.plugin",[]).factory("pluginResourceService",["$log","Restangular","filterService","commandResourceService","genericResourceService",function(a,d,c,e,f){return{plugins:{findAll:function(a,b){var e=[],f=["scripts"],r=_.after(f.length,function(b){a(b)});_.forEach(f,function(a){d.all("plugins").all(a).getList().then(function(a){_.forEach(a,function(a){e.push(c.plain(a))});r(e)},function(a){b(a)})})}},scripts:f.crud(["plugins","scripts"]),commands:f.links(["plugins",
"scripts"],["commands"])}}]);"use strict";
angular.module("JarvisApp.ctrl.plugins",["JarvisApp.services"]).controller("pluginsCtrl",["$scope","$log","genericScopeService","pluginResourceService",function(a,d,c,e){c.scope.resources(function(c){a.plugins=c},function(){return a.plugins},a,"plugins/scripts",e.scripts,{name:"script name",icon:"list",type:"script"})}]).controller("pluginScriptCtrl",["$scope","$log","$stateParams","genericResourceService","genericScopeService","genericPickerService","pluginResourceService","iotResourceService","commandResourceService",
"toastService",function(a,d,c,e,f,g,b,h,m,r){f.scope.resource(a,"script","plugins",b.scripts);a.links={commands:{}};f.scope.resourceLink(function(){return a.commands},a.links.commands,"script","plugins",b.scripts,b.commands,{order:"1",name:"noname",nature:"info",type:"json"},c.id);a.execute=function(c){void 0!=c&&void 0!=c.id&&""!=c.id&&b.scripts.task(c.id,"execute",a.rawTestData,function(b){d.debug("pluginScriptCtrl::execute",c,b);a.rawoutput=b;a.output=angular.toJson(b,!0)},r.failure)};a.render=
function(c){void 0!=c&&void 0!=c.id&&""!=c.id&&b.scripts.task(c.id,"render",a.rawTestData,function(b){d.debug("pluginScriptCtrl::render",c,b);a.rawoutput=b;a.output=angular.toJson(b,!0)},r.failure)};a.submit=function(){a.rawTestData=angular.fromJson(a.editTestData);a.jsonTestData=angular.toJson(a.rawTestData,!0)};a.clear=function(){a.rawoutput={};a.output=angular.toJson({},!0);a.rawTestData={};a.editTestData=angular.toJson(a.rawTestData,!0);a.jsonTestData=angular.toJson(a.rawTestData,!0)};a.setOwner=
function(b){d.debug("setOwner",b);a.script.owner=b.id};a.load=function(){a.activeTab=c.tab;a.clear();a.combo={booleans:[{id:!0,value:"True"},{id:!1,value:"False"}]};e.scope.entity.get(c.id,function(b){a.script=b},b.scripts);a.commands=[];e.scope.collections.findAll("commands",c.id,a.commands,b.commands);a.combo.owners=[{id:void 0,name:"iot.empty"}];e.scope.combo.findAll("owner",a.combo.owners,h.iot);d.info("script-ctrl")}}]);"use strict";
angular.module("JarvisApp.ctrl.properties",["JarvisApp.services"]).controller("propertiesCtrl",["$scope","$log","genericScopeService","propertyResourceService",function(a,d,c,e){c.scope.resources(function(c){a.properties=c},function(){return a.properties},a,"properties",e.property,{key:"key",value:"value"})}]).controller("propertyCtrl",["$scope","$log","$stateParams","$mdDialog","genericResourceService","genericScopeService","propertyResourceService","toastService",function(a,d,c,e,f,g,b,h){g.scope.resource(a,
"property","properties",b.property);a.load=function(){f.scope.entity.get(c.id,function(b){a.property=b},b.property);d.info("property-ctrl",a.properties)}}]);"use strict";angular.module("JarvisApp.services.property",[]).factory("propertyResourceService",["genericResourceService",function(a){return{property:a.crud(["properties"])}}]);"use strict";
angular.module("JarvisApp.routes",["JarvisApp.config"]).config(["$urlRouterProvider",function(a){angular.injector(["ng"]).get("$log").info("$urlRouterProvider",a);a.otherwise("/home")}]).config(["$stateProvider",function(a){angular.injector(["ng"]).get("$log").info("$stateProvider",a);a.state("home",{url:"/home",controller:"homeCtrl",templateUrl:"/ui/js/partials/home/page.html"}).state("helper-iots",{url:"/helper-iots",controller:"helperCtrl",templateUrl:"/ui/js/partials/helper/jarvis-commands.svg"}).state("helper-scenarii",
{url:"/helper-scenarii",controller:"helperCtrl",templateUrl:"/ui/js/partials/helper/jarvis-scenarii.svg"}).state("events",{url:"/events",controller:"eventsCtrl",templateUrl:"/ui/js/partials/events/page.html"}).state("triggers",{url:"/triggers",controller:"triggersCtrl",templateUrl:"/ui/js/partials/triggers/page.html"}).state("triggers-by-id",{url:"/triggers/:id?tab",controller:"triggerCtrl",templateUrl:"/ui/js/partials/triggers/trigger/page.html"}).state("iots",{url:"/iots",controller:"iotsCtrl",
templateUrl:"/ui/js/partials/iots/page.html"}).state("iots-by-id",{url:"/iots/:id?tab",controller:"iotCtrl",templateUrl:"/ui/js/partials/iots/iot/page.html"}).state("plugins",{url:"/plugins",controller:"pluginsCtrl",templateUrl:"/ui/js/partials/plugins/page.html"}).state("plugins-by-id-script",{url:"/plugins/scripts/:id?tab",controller:"pluginScriptCtrl",templateUrl:"/ui/js/partials/plugins/script/page.html"}).state("commands",{url:"/commands",controller:"commandsCtrl",templateUrl:"/ui/js/partials/commands/page.html"}).state("commands-by-id",
{url:"/commands/:id",controller:"commandCtrl",templateUrl:"/ui/js/partials/commands/command/page.html"}).state("views",{url:"/views",controller:"viewsCtrl",templateUrl:"/ui/js/partials/views/page.html"}).state("views-by-id",{url:"/views/:id",controller:"viewCtrl",templateUrl:"/ui/js/partials/views/view/page.html"}).state("configurations",{url:"/configurations",controller:"configurationsCtrl",templateUrl:"/ui/js/partials/configurations/page.html"}).state("configurations-by-id",{url:"/configurations/:id",
controller:"configurationCtrl",templateUrl:"/ui/js/partials/configurations/configuration/page.html"}).state("properties",{url:"/properties",controller:"propertiesCtrl",templateUrl:"/ui/js/partials/properties/page.html"}).state("properties-by-id",{url:"/properties/:id",controller:"propertyCtrl",templateUrl:"/ui/js/partials/properties/property/page.html"}).state("connectors",{url:"/connectors",controller:"connectorsCtrl",templateUrl:"/ui/js/partials/connectors/page.html"}).state("connectors-by-id",
{url:"/connectors/:id",controller:"connectorCtrl",templateUrl:"/ui/js/partials/connectors/connector/page.html"}).state("snapshots",{url:"/snapshots",controller:"snapshotsCtrl",templateUrl:"/ui/js/partials/snapshots/page.html"}).state("snapshots-by-id",{url:"/snapshots/:id",controller:"snapshotCtrl",templateUrl:"/ui/js/partials/snapshots/snapshot/page.html"}).state("crons",{url:"/crons",controller:"cronsCtrl",templateUrl:"/ui/js/partials/crons/page.html"}).state("crons-by-id",{url:"/crons/:id",controller:"cronCtrl",
templateUrl:"/ui/js/partials/crons/cron/page.html"}).state("scenarios",{url:"/scenarios",controller:"scenariosCtrl",templateUrl:"/ui/js/partials/scenarios/page.html"}).state("scenarios-by-id",{url:"/scenarios/:id?tab",controller:"scenarioCtrl",templateUrl:"/ui/js/partials/scenarios/scenario/page.html"}).state("blocks",{url:"/blocks",controller:"blocksCtrl",templateUrl:"/ui/js/partials/blocks/page.html"}).state("blocks-by-id",{url:"/blocks/:id?tab",controller:"blockCtrl",templateUrl:"/ui/js/partials/blocks/block/page.html"})}]);
"use strict";angular.module("JarvisApp.services.scenario",[]).factory("scenarioResourceService",["genericResourceService",function(a){return{scenario:a.crud(["scenarios"]),blocks:a.links(["scenarios"],["blocks"]),triggers:a.links(["scenarios"],["triggers"])}}]);"use strict";
angular.module("JarvisApp.ctrl.scenarios",["JarvisApp.services"]).controller("scenariosCtrl",["$scope","$log","genericScopeService","scenarioResourceService","toastService",function(a,d,c,e,f){c.scope.resources(function(c){a.scenarios=c},function(){return a.scenarios},a,"scenarios",e.scenario,{name:"scenario name",icon:"list"})}]).controller("scenarioCtrl",["$scope","$log","$stateParams","$mdDialog","genericScopeService","genericResourceService","genericPickerService","scenarioResourceService","blockResourceService",
"pluginResourceService","toastService",function(a,d,c,e,f,g,b,h,m,r,k){f.scope.resource(a,"scenario","scenarios",h.scenario);a.links={blocks:{},triggers:{}};f.scope.resourceLink(function(){return a.blocks},a.links.blocks,"scenario","scenarios",h.scenario,h.blocks,{order:"1"},c.id);f.scope.resourceLink(function(){return a.triggers},a.links.triggers,"scenario","scenarios",h.scenario,h.triggers,{order:"1"},c.id);a.build=function(a){var b=[];_.each(a,function(a){d.debug("graph",a.stage);var c="";_.each(a.nodes,
function(a){a.start&&(c+="#"+a.id+"\x3d\x3estart: "+a.name+":\x3e"+a.longId+"\n");a.end&&(c+="#"+a.id+"\x3d\x3eend: "+a.name+":\x3e"+a.longId+"\n");a.activity&&(c+="#"+a.id+"\x3d\x3eoperation: "+a.name+":\x3e"+a.longId+"\n");a.gateway&&(c+="#"+a.id+"\x3d\x3econdition: "+a.name+":\x3e"+a.longId+"\n");a.call&&(c+="#"+a.id+"\x3d\x3esubroutine: "+a.name+":\x3e"+a.longId+"\n")});_.each(a.edges,function(b){c=a.nodes[b.sourceId].gateway?b.bool?c+("#"+b.sourceId+"(yes, right)-\x3e#"+b.targetId+"\n"):c+("#"+
b.sourceId+"(no)-\x3e#"+b.targetId+"\n"):c+("#"+b.sourceId+"-\x3e#"+b.targetId+"\n")});b.push({stage:a.stage,code:c})});return b};a.render=function(a){d.debug(a);$("#canvas").html("");_.each(a,function(a){$("#canvas").append("\x3ch4\x3e"+a.stage+"\x3c/h4\x3e");$("#canvas").append('\x3cdiv id\x3d"canvas-'+a.stage+'"\x3e\x3c/div\x3e')});_.each(a,function(a){d.info("Render",a.stage);flowchart.parse(a.code).drawSVG("canvas-"+a.stage,{"line-width":3,"line-length":50,"text-margin":10,"font-size":12,font:"normal",
"font-family":"Helvetica","font-weight":"normal","font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",scale:1,symbols:{start:{"font-color":"green","element-color":"green",fill:"yellow"},end:{"font-color":"red","element-color":"red",fill:"yellow"}},flowstate:{past:{fill:"#CCCCCC","font-size":12},current:{fill:"yellow","font-color":"red","font-weight":"bold"},future:{fill:"#FFFF99"},request:{fill:"blue"},invalid:{fill:"#444444"},
approved:{fill:"#58C4A3","font-size":12,"yes-text":"APPROVED","no-text":"n/a"},rejected:{fill:"#C45879","font-size":12,"yes-text":"n/a","no-text":"REJECTED"}}})})};a.chart=function(b){void 0!=b&&void 0!=b.id&&""!=b.id&&h.scenario.task(b.id,"render",{},function(c){d.debug("[SCENARIO/render]",b,c);a.codes=a.build(c);a.render(a.codes)},k.failure)};a.execute=function(b){void 0!=b&&void 0!=b.id&&""!=b.id&&h.scenario.task(b.id,"execute",{},function(c){d.debug("[SCENARIO/execute]",b,c);a.console=c},k.failure)};
a.load=function(){a.activeTab=c.tab;a.plugin={};g.scope.entity.get(c.id,function(b){a.scenario=b;a.chart(b)},h.scenario);a.blocks=[];g.scope.collections.findAll("blocks",c.id,a.blocks,h.blocks,function(a){_.forEach(a,function(a){a.plugins={};a.plugins.if=[];a.plugins.then=[];a.plugins.else=[];m.plugins.if.findAll(a.id,function(b){a.plugins.if=b});m.plugins.then.findAll(a.id,function(b){a.plugins.then=b});m.plugins.else.findAll(a.id,function(b){a.plugins.else=b});a.blocks={};a.blocks.then=[];a.blocks.else=
[];m.blocks.then.findAll(a.id,function(b){a.blocks.then=b});m.blocks.else.findAll(a.id,function(b){a.blocks.else=b});d.debug("blocks.plugins",a.plugins);d.debug("blocks.blocks",a.blocks)})});a.triggers=[];g.scope.collections.findAll("triggers",c.id,a.triggers,h.triggers);d.debug("scenario-ctrl",a.scenario)}}]);"use strict";
angular.module("JarvisApp.services.scope",["JarvisApp.services.generic"]).factory("genericScopeService",["$log","$filter","genericResourceService","genericPickerService","toastService",function(a,d,c,e,f){return{scope:{resources:function(g,b,h,m,r,k){a.debug("inject default resources scope",m);h.create=function(a,d){c.scope.collections.new(m,b(),a,r,d)};h.new=function(a){c.scope.collections.new(m,b(),k,r,a)};h.crud=c.crud(m.split("/"));h.remove=function(c,f){e.pickers.confirm(d("translate")("action.drop",
{name:c.name,id:c.id}),"",d("translate")("yes"),d("translate")("no")).then(function(){a.debug("remove",c);var d=c.id;_.remove(b(),function(a){return a.id==d});h.crud.delete(c.id);f&&f(c)},function(){a.debug("abort")})};h.load=function(b){g([]);r.findAll(function(c){g(c);a.debug(m+"-ctrl",c);b&&b()},f.failure)}},resource:function(f,b,h,m,r,k,l){a.debug("inject default resource scope",b);f.remove=function(k){e.pickers.confirm(d("translate")("action.drop",{name:k.name,id:k.id}),"",d("translate")("yes"),
d("translate")("no")).then(function(){c.scope.entity.remove(function(){f.go(h)},b,k,m)},function(){a.debug("abort")})};f.save=function(a){c.scope.entity.save(b,a,m)};f.duplicate=function(a){c.scope.entity.duplicate(function(){f.go(h)},b,a,m)}},resourceLink:function(f,b,h,m,r,k,l,p,n){a.debug("inject link",k);b.add=function(b){a.debug("link::add",b);c.scope.link.add(p,b,l,k,f())};b.update=function(b){a.debug("link::update",b);c.scope.link.save(p,b,k)};b.drop=function(b){e.pickers.confirm(d("translate")("action.remove.link",
{name:b.name,id:b.id}),"",d("translate")("yes"),d("translate")("no")).then(function(){a.debug("link::drop",b);n&&n.remove?n.remove(b):c.scope.link.remove(p,b,k,f());n&&n.afterRemove&&n.afterRemove(b)},function(){a.debug("abort")})}}}}}]);"use strict";var jarvisServicesUrl="/services",jarvisApiUrl="/api",myAppServices=angular.module("JarvisApp.services",["ngResource"]);
myAppServices.factory("toastService",["$log","$mdToast",function(a,d){a=angular.injector(["ng"]).get("$log");a.info("toastService",d);var c;return c={toastPosition:{bottom:!0,top:!1,left:!1,right:!0},getToastPosition:function(){return Object.keys(c.toastPosition).filter(function(a){return c.toastPosition[a]}).join(" ")},failure:function(e){a.error(e);d.show(d.simple().content(e).position(c.getToastPosition()).hideDelay(3E3).theme("failure-toast"))},info:function(e){a.info(e,c.getToastPosition());
d.show(d.simple().position(c.getToastPosition()).textContent(e).hideDelay(3E3).capsule(!0))}}}]);myAppServices.factory("clientResourceService",["$q","$window","$rootScope","Restangular",function(a,d,c,e){angular.injector(["ng"]).get("$log").info("clientResourceService",a);return{findAll:function(a,c){e.all("clients").getList().then(function(b){a(b)},function(a){c(a)})}}}]);
myAppServices.factory("crontabResourceService",["$q","$window","$rootScope","Restangular",function(a,d,c,e){angular.injector(["ng"]).get("$log").info("crontabResourceService",a);return{findAll:function(a,c){e.all("crontabs").getList().then(function(b){a(b)},function(a){c(a)})}}}]);
myAppServices.factory("labelResourceService",["$q","$window","$rootScope","Restangular",function(a,d,c,e){angular.injector(["ng"]).get("$log").info("labelResourceService",a);return{findAll:function(a,c){e.all("labels").getList().then(function(b){a(b)},function(a){c(a)})}}}]);"use strict";angular.module("JarvisApp.services.snapshot",[]).factory("snapshotResourceService",["genericResourceService",function(a){return{snapshot:a.crud(["snapshots"])}}]);"use strict";
angular.module("JarvisApp.ctrl.snapshots",["JarvisApp.services"]).controller("snapshotsCtrl",["$scope","$log","genericScopeService","snapshotResourceService",function(a,d,c,e){c.scope.resources(function(c){a.snapshots=c},function(){return a.snapshots},a,"snapshots",e.snapshot,{name:"snapshot name",icon:"list"})}]).controller("snapshotCtrl",["$scope","$log","$stateParams","$filter","$http","genericResourceService","genericScopeService","snapshotResourceService","iotResourceService","toastService",
function(a,d,c,e,f,g,b,h,m,r){b.scope.resource(a,"snapshot","snapshots",h.snapshot);a.restore=function(a){void 0!=a&&void 0!=a.id&&""!=a.id&&h.snapshot.task(a.id,"restore",{},function(b){d.debug("snapshotCtrl::restore",a,b)},r.failure)};a.download=function(a){void 0!=a&&void 0!=a.id&&""!=a.id&&h.snapshot.task(a.id,"download",{},function(b){var c="export-"+e("date")(new Date,"yyyyMMdd-HHmmss")+".json",f=document.createElement("a");document.body.appendChild(f);f.style="display: none";d.debug("snapshot",
a,b);b=new Blob([angular.toJson(b,!0)],{type:"application/text"});b=window.URL.createObjectURL(b);f.href=b;f.download=c;f.click()},r.failure)};a.upload=function(a){$("#"+a).trigger("click")};a.loaded=function(a,b){a.json=b.data;d.debug("loaded",a,b)};a.load=function(){a.snapshots=[];g.scope.entity.get(c.id,function(b){a.snapshot=b},h.snapshot);d.info("snapshot-ctrl",a.snapshots)}}]);"use strict";
angular.module("JarvisApp.theme",["ngMaterial"]).config(["$mdThemingProvider",function(a){a.definePalette("customPrimary",{50:"#aaeafd",100:"#92e4fc",200:"#79defc",300:"#60d8fb",400:"#47d2fb",500:"#2ECCFA",600:"#15c6f9",700:"#06bbef",800:"#05a7d6",900:"#0594bd",A100:"#c3f0fe",A200:"#dcf7fe",A400:"#f5fdff",A700:"#0480a5"});a.definePalette("customAccent",{50:"#ffffff",100:"#ffffff",200:"#ffffff",300:"#f8fcfe",400:"#e3f4f9",500:"#CEECF5",600:"#b9e4f1",700:"#a4dcec",800:"#8ed3e8",900:"#79cbe4",A100:"#ffffff",
A200:"#ffffff",A400:"#ffffff",A700:"#64c3df"});a.definePalette("customWarn",{50:"#ff8080",100:"#ff6666",200:"#ff4d4d",300:"#ff3333",400:"#ff1a1a",500:"#FF0000",600:"#e60000",700:"#cc0000",800:"#b30000",900:"#990000",A100:"#ff9999",A200:"#ffb3b3",A400:"#ffcccc",A700:"#800000"});a.definePalette("customBackground",{50:"#ffffff",100:"#ffffff",200:"#ffffff",300:"#ffffff",400:"#ffffff",500:"#F2F2F2",600:"#e5e5e5",700:"#d8d8d8",800:"#cccccc",900:"#bfbfbf",A100:"#ffffff",A200:"#ffffff",A400:"#ffffff",A700:"#b2b2b2"});
a.theme("default").primaryPalette("customPrimary").accentPalette("customAccent").warnPalette("customWarn").backgroundPalette("customBackground")}]);"use strict";angular.module("JarvisApp.services.trigger",[]).factory("triggerResourceService",["genericResourceService",function(a){return{trigger:a.crud(["triggers"])}}]);"use strict";
angular.module("JarvisApp.ctrl.triggers",["JarvisApp.services"]).controller("triggersCtrl",["$scope","$log","genericScopeService","triggerResourceService",function(a,d,c,e){c.scope.resources(function(c){a.triggers=c},function(){return a.triggers},a,"triggers",e.trigger,{name:"trigger name",icon:"settings_remote"})}]).controller("triggerCtrl",["$scope","$log","$stateParams","genericResourceService","genericScopeService","triggerResourceService","toastService",function(a,d,c,e,f,g,b){f.scope.resource(a,
"trigger","triggers",g.trigger);a.load=function(){e.scope.entity.get(c.id,function(b){a.trigger=b},g.trigger);d.info("trigger-ctrl")}}]);"use strict";angular.module("JarvisApp.services.view",[]).factory("viewResourceService",["genericResourceService",function(a){return{view:a.crud(["views"]),iots:a.links(["views"],["iots"])}}]);"use strict";
angular.module("JarvisApp.ctrl.views",["JarvisApp.services"]).controller("viewsCtrl",["$scope","$log","genericScopeService","viewResourceService",function(a,d,c,e){d.info("viewsCtrl");c.scope.resources(function(c){a.views=c},function(){return a.views},a,"views",e.view,{name:"view name",icon:"list"})}]).controller("viewCtrl",["$scope, $log","$stateParams","genericResourceService","genericScopeService","viewResourceService","iotResourceService","toastService",function(a,d,c,e,f,g,b,h){f.scope.resource(a,
"view","views",g.view);a.links={iots:{}};f.scope.resourceLink(function(){return a.iots},a.links.iots,"view","views",g.view,g.iots,{order:"1"},c.id);a.load=function(){a.views=[];e.scope.entity.get(c.id,function(b){a.view=b},g.view);a.iots=[];e.scope.collections.findAll("iots",c.id,a.iots,g.iots);d.info("view-ctrl",a.views)}}]);"use strict";
angular.module("JarvisApp.websocket",["angular-websocket"]).factory("$store",["$log","$websocket","$window",function(a,d,c){a.info("Websocket: ",c.location);var e=d("ws://"+c.location.hostname+":"+c.location.port+"/stream/"),f={};e.onMessage(function(a){a=JSON.parse(a.data);void 0===f[a.classname]&&(f[a.classname]={});f[a.classname][a.instance]=a.data});return{collection:f,get:function(){e.send(JSON.stringify({action:"get"}))}}}]);"use strict";
angular.module("JarvisApp.directives.widgets",["JarvisApp.services"]).directive("jarvisPlugins",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/plugins/jarvis-plugins.html",link:function(c,d,f){a.debug("jarvis-plugins")}}}]).directive("jarvisDefaultMenuBar",["$log","$parse",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/widget/tools/jarvis-default-menu-bar.html",require:"ngModel",link:function(a,d,f,g){a.closeMenu=f.close;a.element=function(){return g.$viewValue}}}}]).directive("jarvisPickElement",
["$log","$parse","genericPickerService",function(a,d,c){return{restrict:"E",template:'\x3cmd-button aria-label\x3d"menu" class\x3d"md-icon-button" ng-click\x3d"pickItemDialog($event)"\x3e\x3cmd-tooltip\x3e{{pick.tooltips|translate}}\x3c/md-tooltip\x3e\x3cmd-icon md-font-icon\x3d"material-icons md-16"\x3e{{pick.icon}}\x3c/md-icon\x3e\x3c/md-button\x3e',scope:{},link:function(e,f,g,b){e.pick={};e.pick.tooltips=g.tooltips;e.pick.icon=g.icon;e.pick.tooltips=g.tooltips;e.pick.ctrl=g.ctrl;e.pick.callback=
g.callback;e.pickItemDialog=function(b,f){return c.pickers.nodes(b,function(a){d(e.pick.callback)(e.$parent)(a)},function(){a.debug("no picked element")},e.pick.ctrl)}}}}]).directive("jarvisPluginCommon",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/plugins/script/jarvis-plugin-general.html",link:function(c,d,f){a.debug("jarvis-plugin-common")}}}]).directive("jarvisPluginScript",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/plugins/script/jarvis-plugin-script.html",
link:function(c,d,f){a.debug("jarvis-plugin-script")}}}]).directive("typecommand",["$log",function(a){return{require:"ngModel",link:function(a,c,e,f){f.$validators.typecommand=function(a,b){return f.$isEmpty(a)?!1:"data"==a||"action"==a?!0:!1}}}}]).directive("naturecommand",["$log",function(a){return{require:"ngModel",link:function(a,c,e,f){f.$validators.naturecommand=function(a,b){return f.$isEmpty(a)?!1:"text"==a||"json"==a||"xml"==a?!0:!1}}}}]).directive("jarvisPluginRender",["$log","$stateParams",
function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/plugins/script/jarvis-plugin-result.html",link:function(c,d,f){a.debug("jarvis-plugin-output")}}}]).directive("jarvisIots",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/iots/jarvis-iots.html",link:function(c,d,f){a.debug("jarvis-iots")}}}]).directive("jarvisIot",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/iots/iot/jarvis-iot-general.html",link:function(c,
d,f){a.debug("jarvis-iot-general")}}}]).directive("jarvisIotPlugin",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/iots/iot/jarvis-iot-plugin.html",link:function(c,d,f){a.debug("jarvis-iot-plugin")}}}]).directive("jarvisIotRender",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/iots/iot/jarvis-iot-render.html",link:function(c,d,f){a.debug("jarvis-iot-render")}}}]).directive("jarvisEvents",["$log","$stateParams",function(a,
d){return{restrict:"E",templateUrl:"/ui/js/partials/events/jarvis-events.html",link:function(c,d,f){a.debug("jarvis-iots")}}}]).directive("jarvisTriggers",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/triggers/jarvis-triggers.html",link:function(c,d,f){a.debug("jarvis-triggers")}}}]).directive("jarvisTrigger",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/triggers/trigger/jarvis-trigger-general.html",link:function(c,d,
f){a.debug("jarvis-trigger")}}}]).directive("jarvisCommands",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/commands/jarvis-commands.html",link:function(c,d,f){a.debug("jarvis-commands")}}}]).directive("jarvisCommand",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/commands/command/jarvis-command-general.html",link:function(c,d,f){a.debug("jarvis-command")}}}]).directive("jarvisCommandInput",["$log","$stateParams",function(a,
d){return{restrict:"E",templateUrl:"/ui/js/partials/commands/command/jarvis-command-input.html",link:function(c,d,f){a.debug("jarvis-command-input")}}}]).directive("jarvisCommandScript",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/commands/command/jarvis-command-script.html",link:function(c,d,f){a.debug("jarvis-command-script")}}}]).directive("jarvisCommandOutput",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/commands/command/jarvis-command-output.html",
link:function(c,d,f){a.debug("jarvis-command-output")}}}]).directive("jarvisViews",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/views/jarvis-views.html",link:function(c,d,f){a.debug("jarvis-views")}}}]).directive("jarvisView",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/views/view/jarvis-view-general.html",link:function(c,d,f){a.debug("jarvis-view")}}}]).directive("jarvisConfigurations",["$log","$stateParams",function(a,
d){return{restrict:"E",templateUrl:"/ui/js/partials/configurations/jarvis-configurations.html",link:function(c,d,f){a.debug("jarvis-configurations")}}}]).directive("jarvisConfiguration",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/configurations/configuration/jarvis-configuration-general.html",link:function(c,d,f){a.debug("jarvis-configuration")}}}]).directive("jarvisProperties",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/properties/jarvis-properties.html",
link:function(c,d,f){a.debug("jarvis-properties")}}}]).directive("jarvisProperty",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/properties/property/jarvis-property-general.html",link:function(c,d,f){a.debug("jarvis-property")}}}]).directive("jarvisConnectors",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/connectors/jarvis-connectors.html",link:function(c,d,f){a.debug("jarvis-connectors")}}}]).directive("jarvisConnectorGeneral",
["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/connectors/connector/jarvis-connector-general.html",link:function(c,d,f){a.debug("jarvis-connector-general")}}}]).directive("jarvisSnapshots",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/snapshots/jarvis-snapshots.html",link:function(c,d,f){a.debug("jarvis-snapshots")}}}]).directive("jarvisSnapshot",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/snapshots/snapshot/jarvis-snapshot-general.html",
link:function(c,d,f){a.debug("jarvis-snapshot")}}}]).directive("jarvisCrons",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/crons/jarvis-crons.html",link:function(c,d,f){a.debug("jarvis-crons")}}}]).directive("jarvisCron",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/crons/cron/jarvis-cron-general.html",link:function(c,d,f){a.debug("jarvis-cron")}}}]).directive("jarvisScenarios",["$log","$stateParams",function(a,d){return{restrict:"E",
templateUrl:"/ui/js/partials/scenarios/jarvis-scenarios.html",link:function(c,d,f){a.debug("jarvis-scenarios")}}}]).directive("jarvisScenario",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/scenarios/scenario/jarvis-scenario-general.html",link:function(c,d,f){a.debug("jarvis-scenario")}}}]).directive("jarvisScenarioBlocks",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/scenarios/scenario/jarvis-scenario-blocks.html",link:function(c,
d,f){a.debug("jarvis-scenario-blocks")}}}]).directive("jarvisScenarioBlock",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/scenarios/scenario/jarvis-scenario-block.html",link:function(c,d,f){a.debug("jarvis-scenario-block")}}}]).directive("jarvisScenarioGraph",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/scenarios/scenario/jarvis-scenario-graph.html",link:function(c,d,f){a.debug("jarvis-scenario-graph")}}}]).directive("jarvisScenarioConsole",
["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/scenarios/scenario/jarvis-scenario-console.html",link:function(c,d,f){a.debug("jarvis-scenario-console")}}}]).directive("jarvisBlocks",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/blocks/jarvis-blocks.html",link:function(c,d,f){a.debug("jarvis-blocks")}}}]).directive("jarvisBlock",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/blocks/block/jarvis-block-general.html",
link:function(c,d,f){a.debug("jarvis-block")}}}]).directive("jarvisBlockThen",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/blocks/block/jarvis-block-then.html",link:function(c,d,f){a.debug("jarvis-block-then")}}}]).directive("jarvisBlockElse",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/blocks/block/jarvis-block-else.html",link:function(c,d,f){a.debug("jarvis-block-else")}}}]).directive("jarvisHome",["$log","$stateParams",
function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/home/jarvis-home.html",link:function(c,d,f){a.debug("jarvis-home")}}}]).directive("jarvisCard",["$log","$parse",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/widget/tile/jarvis-card.html",scope:!1,link:function(c,e,f){a.debug("jarvis-card element",d(f.element)(c));a.debug("jarvis-card state",d(f.state)(c));c.element=d(f.element)(c);c.state=d(f.state)(c)}}}]).directive("jarvisTile",["$log","$stateParams",function(a,d){return{restrict:"E",
templateUrl:"/ui/js/partials/widget/tile/jarvis-tile.html",link:function(c,d,f){a.debug("jarvis-tile")}}}]).directive("jarvisTileBoolean",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/widget/tile/jarvis-tile-boolean.html",link:function(c,d,f){a.debug("jarvis-tile-boolean")}}}]).directive("jarvisTileInt",["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/widget/tile/jarvis-tile-int.html",link:function(c,d,f){a.debug("jarvis-tile-int")}}}]).directive("jarvisTilePercent",
["$log","$stateParams",function(a,d){return{restrict:"E",templateUrl:"/ui/js/partials/widget/tile/jarvis-tile-percent.html",link:function(c,d,f){a.debug("jarvis-tile-percent")}}}]).directive("jarvisInlineTemplate",["$log","$stateParams","$parse",function(a,d,c){return{restrict:"E",template:'\x3cdiv ng-include\x3d"getJarvisInlineTemplateUrl()"\x3e\x3c/div\x3e',link:function(d,f,g){a.debug("jarvis-inline-template id",c(g.id)(d));d.getJarvisInlineTemplateUrl=function(){d.data=c(g.data)(d);return"/api/directives/html/iots/"+
c(g.id)(d)}}}}]).directive("jarvisGauge",["$log","$store",function(a,d){return{restrict:"AC",controller:["$scope","$element","$attrs",function(c,e,f){a.debug("jarvis-gauge",f.id);c.gauge=(new Gauge(document.getElementById(f.id))).setOptions({fontSize:10,lines:10,angle:0,lineWidth:.32,pointer:{length:.9,strokeWidth:.035,color:"#000000"},limitMax:"false",colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:!0});c.gauge.maxValue=100;c.gauge.animationSpeed=10;c.gauge.set(0);
c.systemIndicator=function(){return void 0==d.collection||void 0==d.collection.SystemIndicator||void 0==d.collection.SystemIndicator["1"]?0:d.collection.SystemIndicator["1"]};c.$watch(c.systemIndicator,function(a,b,d){c.gauge.set(1E3*a.processCpuLoad)})}]}}]);